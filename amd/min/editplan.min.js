function addprRecord(){const e="<td class='td-pr-type'><select class='w-100 pr-type' required><option disabled value='' selected>Learner/Employer</option><option value='Learner'>Learner</option><option value='Employer'>Employer</option></select></td><td class='td-pr-pr'><input class='w-100 pr-pr' type='date' required></td><td class='td-pr-ar'><input class='w-100 pr-ar' type='date'></td>",t=document.createElement("tr");t.className="tr-td-pr",t.innerHTML=e,document.getElementById("pr_tbody").appendChild(t),document.getElementById("pr_removerecord").disabled=!1}function removeprRecord(){const e=document.querySelectorAll(".pr-type");let t=0;for(let n=0;n<e.length;n++)e[n].disabled&&(t=t<n?n:t);if(e.length-1!=t){const n=document.querySelectorAll(".tr-td-pr"),l=n[n.length-1];l.remove(),e.length-2==t&&(document.getElementById("pr_removerecord").disabled=!0)}}document.getElementById("plan_form").addEventListener("submit",e=>{e.preventDefault(),document.getElementById("tplan_success")&&document.getElementById("tplan_success").remove();const t=["cl_daterequired","cl_logrequired"];null!==document.getElementById("mathaed")&&t.push("mathaed","mathaead","engaed","engaead"),console.log(t);const n=[["mod-rsd","mod-red","mod-otjt"],["pr-type","pr-pr","pr-ar"]];let l="";t.forEach(function(e){l+=`${e}=${document.getElementById(e).value.replaceAll("&","($)")}&`,document.getElementById("td_"+e).style.background=""});let r=0;n[0].forEach(function(e){const t=document.querySelectorAll("."+e),n=document.querySelectorAll(".td-"+e);for(let r=0;r<t.length;r++)l+=`${e}-${r}=${t[r].value.replaceAll("&","($)")}&`,n[r].style.background="";r=r<t.length?t.length:r}),l+=`mod-total=${r}&`,r=0,newtotal=0,pos=0,n[1].forEach(function(e){const t=document.querySelectorAll("."+e),n=document.querySelectorAll(".td-"+e);for(let r=0;r<t.length;r++)t[r].disabled||(l+=`${e}-${r}=${t[r].value}&`,n[r].style.background="",0==pos&&newtotal++);r=r<t.length?t.length:r,pos++}),l+=`pr-total-new=${newtotal}&pr-total=${r}`;const o=document.getElementById("tp_error");o.style.display="none";const d=new XMLHttpRequest;d.open("POST","./classes/inc/editplan.inc.php",!0),d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onload=function(){if(200==this.status){const e=JSON.parse(this.responseText);e.error?(o.innerText="Invalid values: ",e.error.forEach(function(e){t.includes(e[0])?document.getElementById("td_"+e[0]).style.background="red":n[0].includes(e[0])?document.querySelectorAll(".td-"+e[0])[e[2]].style.background="red":n[1].includes(e[0])&&(document.querySelectorAll(".td-"+e[0])[e[2]].style.background="red"),o.innerText+=e[1]+"|"}),o.innerText=o.innerText.slice(0,-1),o.style.display="block"):e.return?window.location.reload():(o.innerText="Creation error.",o.style.display="block")}else o.innerText="Connection error.",o.style.display="block"},d.send(l)});